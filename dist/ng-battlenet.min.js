angular.module("ngBattleNet",["httpi"]).provider("battleNetConfig",function(){"use strict";var a={apiKey:null,defaultRegion:"us"};this.setApiKey=function(b){a.apiKey=b},this.getApiKey=function(){return a.apiKey},this.setDefaultRegion=function(b){a.defaultRegion=b},this.getDefaultRegion=function(){return a.defaultRegion},this.$get=[function(){return this}]}).factory("battleNetApiRequest",["battleNetConfig","httpi",function(a,b){"use strict";var c="https://:origin.api.battle.net/",d={apikey:a.getApiKey()},e={us:"en_US",eu:"en_GB",sea:"en_US",kr:"ko_KR",tw:"zh_TW"};return function(f,g){var h=c+f;return g=g||{},angular.extend(g,d),g.origin=g.origin||a.getDefaultRegion(),g.locale=g.locale||e[g.origin],b({method:"jsonp",url:h,params:g,keepTrailingSlash:!0})}}]).factory("battleNetApi",["d3Api","sc2Api","wowApi",function(a,b,c){"use strict";return{d3:a,sc2:b,wow:c}}]).factory("d3Api",["battleNetApiRequest",function(a){"use strict";function b(b,c){return c=c||{},angular.extend(c,{callback:"JSON_CALLBACK"}),a("d3/"+b,c)}function c(a){return a.replace(/#/g,"-")}var d={};return d.data={artisan:function(a){return b("data/artisan/:artisan",a)},follower:function(a){return b("data/follower/:follower",a)},item:function(a){return b("data/item/:data",a)}},d.profile={career:function(a){return a.battletag=c(a.battletag),b("profile/:battletag/",a)},hero:function(a){return a.battletag=c(a.battletag),b("profile/:battletag/hero/:id",a)}},d}]).factory("sc2Api",["battleNetApiRequest",function(a){"use strict";function b(b,c){return c=c||{},angular.extend(c,{callback:"JSON_CALLBACK"}),a("sc2/"+b,c)}var c={};return c.data={achievements:function(a){return b("data/achievements",a)},rewards:function(a){return b("data/rewards",a)}},c.ladder=function(a){return b("ladder/:id",a)},c.profile={profile:function(a){return b("profile/:id/:region/:name/",a)},ladders:function(a){return b("profile/:id/:region/:name/ladders",a)},matchHistory:function(a){return b("profile/:id/:region/:name/matches",a)}},c}]).factory("wowApi",["battleNetApiRequest",function(a){"use strict";function b(b,c){return c=c||{},angular.extend(c,{jsonp:"JSON_CALLBACK"}),a("wow/"+b,c)}var c={},d=["achievements","appearance","feed","guild","hunterPets","items","mounts","pets","petSlots","progression","pvp","quests","reputation","stats","talents","titles","audit"],e=["members","achievements","news","challenge"];return c.achievement=function(a){return b("achievement/:id",a)},c.auction=function(a){return b("auction/data/:realm",a)},c.battlePet={ability:function(a){return b("battlePet/ability/:id",a)},species:function(a){return b("battlePet/species/:id",a)},stats:function(a){return b("battlePet/stats/:id",a)}},c.challenge={realmLeaderboard:function(a){return b("challenge/:realm",a)},regionLeaderboard:function(a){return b("challenge/region",a)}},c.character={profile:function(a){return b("character/:realm/:name",a)}},angular.forEach(d,function(a){c.character[a]=function(b){return angular.extend(b,{fields:a}),c.character.profile(b)}}),c.data={battlegroups:function(a){return b("data/battlegroups/",a)},characterRaces:function(a){return b("data/character/races",a)},characterClasses:function(a){return b("data/character/classes",a)},characterAchievements:function(a){return b("data/character/achievements",a)},guildRewards:function(a){return b("data/guild/rewards",a)},guildPerks:function(a){return b("data/guild/perks",a)},guildAchievements:function(a){return b("data/guild/achievements",a)},itemClasses:function(a){return b("data/item/classes",a)},talents:function(a){return b("data/talents",a)},petTypes:function(a){return b("data/pet/types",a)}},c.guild={profile:function(a){return b("guild/:realm/:name",a)}},angular.forEach(e,function(a){c.guild[a]=function(b){return angular.extend(b,{fields:a}),c.guild.profile(b)}}),c.item={item:function(a){return b("item/:id",a)},set:function(a){return b("item/set/:id",a)}},c.pvp={leaderboards:function(a){return b("leaderboard/:bracket",a)}},c.quest=function(a){return b("quest/:id",a)},c.realmStatus=function(a){return a&&a.realms&&(Array.isArray(a.realms)&&(a.realms=a.realms.join(",")),a.realms=a.realms.replace(/\s/g,"-")),b("realm/status",a)},c.recipe=function(a){return b("recipe/:id",a)},c.spell=function(a){return b("spell/:id",a)},c}]);