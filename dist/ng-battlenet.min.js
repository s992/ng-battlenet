angular.module("ngBattleNet",["httpi"]).provider("battleNetConfig",function(){"use strict";var a={apiKey:null,defaultRegion:"us"};this.setApiKey=function(b){a.apiKey=b},this.getApiKey=function(){return a.apiKey},this.setDefaultRegion=function(b){a.defaultRegion=b},this.getDefaultRegion=function(){return a.defaultRegion},this.$get=[function(){return this}]}).factory("battleNetApiRequest",["battleNetConfig","httpi",function(a,b){"use strict";var c="https://:bnetRegion.api.battle.net/",d={apikey:a.getApiKey()},e={us:"en_US",eu:"en_GB",sea:"en_US",kr:"ko_KR",tw:"zh_TW"};return function(f,g){var h=c+f;return g=g||{},angular.extend(g,d),g.bnetRegion=g.bnetRegion||a.getDefaultRegion(),g.locale=g.locale||e[g.bnetRegion],b({method:"jsonp",url:h,params:g,keepTrailingSlash:!0})}}]).factory("battleNetApi",["d3Api","sc2Api","wowApi",function(a,b,c){"use strict";return{d3:a,sc2:b,wow:c}}]).factory("d3Api",["battleNetApiRequest",function(a){"use strict";function b(b,c){return c=c||{},angular.extend(c,{callback:"JSON_CALLBACK"}),a("d3/"+b,c)}function c(a){return a.replace(/#/g,"-")}var d={};return d.data={artisan:function(a){return b("data/artisan/:artisan",a)},follower:function(a){return b("data/follower/:follower",a)},item:function(a){return b("data/item/:data",a)}},d.profile={career:function(a){return a.battletag=c(a.battletag),b("profile/:battletag/",a)},hero:function(a){return a.battletag=c(a.battletag),b("profile/:battletag/hero/:id",a)}},d}]).factory("sc2Api",["battleNetApiRequest",function(a){"use strict";function b(b,c){return c=c||{},angular.extend(c,{callback:"JSON_CALLBACK"}),a("sc2/"+b,c)}var c={};return c.data={achievements:function(a){return b("data/achievements",a)},rewards:function(a){return b("data/rewards",a)}},c.ladder=function(a){return b("ladder/:id",a)},c.profile={profile:function(a){return b("profile/:id/:region/:name/",a)},ladders:function(a){return b("profile/:id/:region/:name/ladders",a)},matchHistory:function(a){return b("profile/:id/:region/:name/matches",a)}},c}]).factory("wowApi",["battleNetApiRequest",function(a){"use strict";function b(b,c){return c=c||{},angular.extend(c,{jsonp:"JSON_CALLBACK"}),a("wow/"+b,c)}function c(a,b){return function(c){return angular.extend(c,{fields:a}),b(c)}}var d={};return d.achievement=function(a){return b("achievement/:id",a)},d.auction=function(a){return b("auction/data/:realm",a)},d.battlePet={ability:function(a){return b("battlePet/ability/:id",a)},species:function(a){return b("battlePet/species/:id",a)},stats:function(a){return b("battlePet/stats/:id",a)}},d.challenge={realmLeaderboard:function(a){return b("challenge/:realm",a)},regionLeaderboard:function(a){return b("challenge/region",a)}},d.character={profile:function(a){return a&&a.fields&&Array.isArray(a.fields)&&(a.fields=a.fields.join(",")),b("character/:realm/:name",a)}},d.character.achievements=c("achievements",d.character.profile),d.character.appearance=c("appearance",d.character.profile),d.character.feed=c("feed",d.character.profile),d.character.guild=c("guild",d.character.profile),d.character.hunterPets=c("hunterPets",d.character.profile),d.character.items=c("items",d.character.profile),d.character.mounts=c("mounts",d.character.profile),d.character.pets=c("pets",d.character.profile),d.character.petSlots=c("petSlots",d.character.profile),d.character.progression=c("progression",d.character.profile),d.character.pvp=c("pvp",d.character.profile),d.character.quests=c("quests",d.character.profile),d.character.reputation=c("reputation",d.character.profile),d.character.stats=c("stats",d.character.profile),d.character.talents=c("talents",d.character.profile),d.character.titles=c("titles",d.character.profile),d.character.audit=c("audit",d.character.profile),d.data={battlegroups:function(a){return b("data/battlegroups/",a)},characterRaces:function(a){return b("data/character/races",a)},characterClasses:function(a){return b("data/character/classes",a)},characterAchievements:function(a){return b("data/character/achievements",a)},guildRewards:function(a){return b("data/guild/rewards",a)},guildPerks:function(a){return b("data/guild/perks",a)},guildAchievements:function(a){return b("data/guild/achievements",a)},itemClasses:function(a){return b("data/item/classes",a)},talents:function(a){return b("data/talents",a)},petTypes:function(a){return b("data/pet/types",a)}},d.guild={profile:function(a){return a&&a.fields&&Array.isArray(a.fields)&&(a.fields=a.fields.join(",")),b("guild/:realm/:name",a)}},d.guild.members=c("members",d.guild.profile),d.guild.achievements=c("achievements",d.guild.profile),d.guild.news=c("news",d.guild.profile),d.guild.challenge=c("challenge",d.guild.profile),d.item={item:function(a){return b("item/:id",a)},set:function(a){return b("item/set/:id",a)}},d.pvp={leaderboards:function(a){return b("leaderboard/:bracket",a)}},d.quest=function(a){return b("quest/:id",a)},d.realmStatus=function(a){return a&&a.realms&&(Array.isArray(a.realms)&&(a.realms=a.realms.join(",")),a.realms=a.realms.replace(/\s/g,"-")),b("realm/status",a)},d.recipe=function(a){return b("recipe/:id",a)},d.spell=function(a){return b("spell/:id",a)},d}]);